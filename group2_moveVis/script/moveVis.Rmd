---
title: "moveVis group 2"
author: "Roshan, Jonathan, Mackenzie, Kenta"
date: "2023-04-11"
output: 
  html_document:
    toc: TRUE
    toc_float: TRUE
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,  #display code?
                      message = FALSE, #display messages?
                      warning = FALSE, #display 
                      fig.path = "../output/")
```

# Introduction into moveVis

### 1. Background

-   MoveViz is a package that consists of a set of tools used for visualizing movement data into animated trajectories

-   Movement trajectories used for ggplots

-   Spatial data containing x and y geolocation points for plots and maps is integrated with time stamp data (temporal data) forming spatio-temporal data

-   Move, raster class inputs or movestack data added to baselayer map for ggplot frames

-   MoveVis functions to animate movement trajectories using different time intervals

-   Frames rendered into animations encoded as GIF or video file,





### 2. Application of moveVis

-   Many of us in Biology programs conduct research consisting of track data for marine life such as sharks, dolphins and fish.

-   Migration of cattle, bears, birds, snakes, lizards and endangered species.

-   Population data i.e. human migration movement data across continents over time

-   useful tool for visually exploring and interpreting movement patterns, including potential interactions of individuals with each other and their environment

-   Climate data, tornados, storms, rain & wind, tracking major weather events

-   Historical data, migration, climate, environmental

-   Stock data

-   Can be used to track sports races/events such as bike races, cars, marathons etc

-   Time resolution could be 500 years for human migration or 5 seconds for bike race data

### 3. The 4 computational steps

-   To produce a ggplot or video output containing animated movement data, 4 main functions must be carried out

-   (a) preparing data, (b) creating frames, (c) adapting frames and (d) animating frames

-   Each of which have sub functions within their category to further optimize the output features of the visual.

-   There are additional features that function by manipulating and changing the data such as those in the tidyverse package

```{r out.width="100%", echo= FALSE}
knitr::include_graphics(here::here("group2_moveVis","data","moveVis.png"))

```

## ----------------------------------------------------------------------------------------------

# Loading our Libraries

```{r}
library(tidyverse)
library(here)
library(tidytuesdayR)
library(lubridate)
```

To Download moveVis : **install.packages("moveVis")**

```{r}
# install.packages("moveVis")
library(moveVis)
```

# Loading our Sample data

To demostrate the abilities of this package, we will use Pet Cats UK dataset from TidyTuesday

Will use the "cats_uk" dataset

```{r, cache=TRUE}
tuesdata <- tidytuesdayR::tt_load(2023, week = 5)
cats_uk <- as.data.frame(tuesdata$cats_uk) 
```

# Data Requirement

-   unique sample identifier column
-   time stamp (in a date format)
-   x (longitude)
-   y (latitude)

```{r}
glimpse(cats_uk)
```

# Preparing Movement Tracks

### Cleaning the data

-   Needs to be a times data

-   Cannot have duplicated time stamp

```{r}
cats_uk <- cats_uk%>% 
  mutate( timestamp = ymd_hms(timestamp)) %>%
  filter(tag_id %in% c("Athena","Ares", "Lola")) #simplify dataset to managable practice set
```

If there is duplicated timestamp, needs to be removed

```{r}
cats_uk <- cats_uk[!duplicated(cats_uk$timestamp),]
```

### Use a object called Move or moveStack

First have to convert a data.frame to move or moveStack using *df2move()*

Our required compnents of the data will be specified here

```{r}
cat <- df2move(cats_uk,  #df
        proj = "+init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0",  #type of projection
        x = "location_long",  #what are your x coord
        y = "location_lat",
        time = "timestamp", #what are the time, needs to be POSIXct
        track_id = "tag_id"
)

glimpse(cat)
```

### Align time resolution

To be able to convert data into frames, it needs to be consistent time intervals

```{r}
m <- align_move(cat, 
                res = 10, #specify resolution
                unit = "mins") #resolution unit

glimpse(m)
```
