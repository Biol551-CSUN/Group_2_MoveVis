---
title: "Cat"
author: "Jonathan Huang"
date: "`r Sys.Date()`"
output: 
  html_document:
    toc: true 
    toc_float: true
    theme: cosmo
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,  #display code?
                      message = FALSE, #display messages?
                      warning = FALSE, #display 
                      fig.path = "../output/")
```

# Libraries

```{r}
library(tidyverse)
library(here)
library(tidytuesdayR)
library(lubridate)
```

To Download moveVis : **install.packages("moveVis")**

```{r}
# install.packages("moveVis")
library(moveVis)
```

# Sample data

To demostrate the abilities of this package, we will use Pet Cats UK dataset from TidyTuesday

Will use the "cats_uk" dataset

```{r}
tuesdata <- tidytuesdayR::tt_load(2023, week = 5)
cats_uk <- as.data.frame(tuesdata$cats_uk) 
```

# Data Requirement

-   unique sample identifier column
-   time stamp (in a date format)
-   x (longitude)
-   y (latitude)

```{r}
glimpse(cats_uk)
```

# Preparing Movement Tracks

### Cleaning the data

-   Needs to be a times data

-   Cannot have duplicated time stamp

```{r}
cats_uk <- cats_uk%>% 
  mutate( timestamp = ymd_hms(timestamp)) %>%
  filter(tag_id %in% c("Athena","Ares", "Lola")) #simplify dataset to managable practice set
```

If there is duplicated timestamp, needs to be removed

```{r}
cats_uk <- cats_uk[!duplicated(cats_uk$timestamp),]
```

### Use a object called Move or moveStack

First have to convert a data.frame to move or moveStack using *df2move()*

Our required compnents of the data will be specified here

```{r}
cat <- df2move(cats_uk,  #df
        proj = "+init=epsg:4326 +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0",  #type of projection
        x = "location_long",  #what are your x coord
        y = "location_lat",
        time = "timestamp", #what are the time, needs to be POSIXct
        track_id = "tag_id"
)

glimpse(cat)
```

### Align time resolution

To be able to convert data into frames, it needs to be consistent time intervals

```{r}
m <- align_move(cat, 
                res = 10, #specify resolution
                unit = "mins") #resolution unit

glimpse(m)
```

README

# Folder detail

This repository is a used to introduce a package for BIOL 551, Computer Modeling.

-   script: R markdown file and a html markdown file that describes the background on the moveVis package and the basis of how the package works, and step-by-step walk through example of how to use the functions within i the package

-   data: png of an image describing workflow of converting tracking data into an animation


# Group 2 Members:

Roshan Fallah, Kenta Shimizu, Mac Hein, Jonathan Huang

# Introduction

[MoveVis](https://www.rdocumentation.org/packages/moveVis/versions/0.10.5) is a package that creates animation from movement data and temporal changes of environmental data

# Data

The data in this folder utilizes a public, TidyTuesdayR data set found [here](https://github.com/rfordatascience/tidytuesday/tree/master/data/2023/2023-01-31)

# For more info on the package:

<https://movevis.org/>

<https://besjournals.onlinelibrary.wiley.com/doi/10.1111/2041-210X.13374>
